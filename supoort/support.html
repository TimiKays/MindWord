<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ”¯æŒä¸€ä¸‹ Â· MindWord</title>

  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8545877256902738"
    crossorigin="anonymous"></script>

  <style>
    :root {
      --bg-gradient: linear-gradient(135deg, #eaf7f5, #eef3ff);
      --primary: #5bbcb3;
      --text-main: #2f3a3a;
      --text-sub: #6b7c7c;
      --card-bg: rgba(255, 255, 255, 0.75);
      --border-soft: rgba(0, 0, 0, 0.05);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: var(--bg-gradient);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
        "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
      color: var(--text-main);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .card {
      width: 92%;
      max-width: 420px;
      padding: 28px 26px 30px;
      background: var(--card-bg);
      border-radius: 20px;
      -webkit-backdrop-filter: blur(12px);
      backdrop-filter: blur(12px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.08);
      text-align: center;
    }

    h1 {
      font-size: 20px;
      margin: 0 0 10px;
      font-weight: 600;
    }

    p.desc {
      font-size: 14px;
      color: var(--text-sub);
      line-height: 1.6;
      margin-bottom: 22px;
    }

    /* ğŸ‘ ç‚¹èµæŒ‰é’® */
    .like-area {
      margin: 22px 0 12px;
      position: relative;
    }

    .like-btn {
      width: 96px;
      height: 96px;
      border-radius: 50%;
      border: none;
      background: white;
      box-shadow: 0 10px 24px rgba(0, 0, 0, 0.12);
      font-size: 36px;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .like-btn:active {
      transform: scale(0.9);
    }

    .like-count {
      margin-top: 20px;
      font-size: 13px;
      color: var(--text-sub);
    }

    /* ğŸ’¬ éšæœºæ„Ÿè°¢è¯­ */
    .thanks {
      min-height: 20px;
      margin-top: 14px;
      font-size: 14px;
      color: var(--primary);
      opacity: 0;
      transition: opacity 0.4s ease;
    }

    .thanks.show {
      opacity: 1;
    }

    /* âœ¨ ç‚¹èµåŠ¨ç”»ç²’å­ */
    .bubble {
      position: fixed;
      font-size: 18px;
      pointer-events: none;
      animation: floatUp 1.2s ease-out forwards;
      z-index: 1000;
    }

    @keyframes floatUp {
      0% {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.6);
      }

      20% {
        opacity: 1;
      }

      100% {
        opacity: 0;
        transform: translate(-50%, -110px) scale(1.2);
      }
    }

    /* ğŸ”— å…¶ä»–æ”¯æŒæ–¹å¼ */
    .actions {
      margin-top: 26px;
      display: grid;
      gap: 10px;
    }

    .action {
      font-size: 13px;
      color: var(--text-sub);
      text-decoration: none;
      padding: 10px 12px;
      border-radius: 10px;
      background: white;
      border: 1px solid var(--border-soft);
      transition: background 0.2s;
    }

    .action:hover {
      background: #f6fbfb;
    }

    .footer {
      margin-top: 18px;
      font-size: 12px;
      color: #9aa;
    }
  </style>
</head>

<body>
  <div class="card">
    <h1>ğŸŒ± æ”¯æŒ MindWord</h1>
    <p class="desc">
      MindWord æ˜¯ä¸€ä¸ªå®Œå…¨å…è´¹çš„å°å·¥å…·ã€‚<br />
      å¦‚æœå®ƒåˆšå¥½å¸®åˆ°ä½ ä¸€ç‚¹ç‚¹ï¼Œé‚£æˆ‘ä»¬ä¼šå¾ˆå¼€å¿ƒã€‚
    </p>

    <div class="like-area">
      <button class="like-btn" id="likeBtn">ğŸ‘</button>
      <div class="like-count" id="likeCount">å·²æ”¶åˆ° 0 ä¸ªç‚¹èµ</div>
      <div class="thanks" id="thanksText"></div>
    </div>

    <div class="actions">

      <a class="action" href="/feedback.html" target="_blank">
        ğŸ’¬ ç•™ä¸‹ä¸€ç‚¹æƒ³æ³•æˆ–å»ºè®®
      </a>
      <a class="action" href="#" id="shareBtn">
        ğŸ”— åˆ†äº«ç»™å¯èƒ½ç”¨å¾—ä¸Šçš„æœ‹å‹
      </a>
      <a class="action" href="#" id="watchAdBtn">
        ğŸ“º çœ‹ä¸ªå¹¿å‘Šï¼ˆæ•¬è¯·æœŸå¾…...ï¼‰
      </a>
    </div>

    <div class="footer">
      æ˜¯å¦æ”¯æŒå®Œå…¨è‡ªæ„¿ Â· å¯¹äº§å“ä½¿ç”¨æ— ä»»ä½•å½±å“å“¦ ğŸ˜º
    </div>
  </div>

  <script>
    // å›½é™…åŒ–é…ç½®
    const i18n = {
      zh: {
        title: 'æ”¯æŒä¸€ä¸‹ Â· MindWord',
        header: 'ğŸŒ± æ”¯æŒ MindWord',
        description: 'MindWord æ˜¯ä¸€ä¸ªå®Œå…¨å…è´¹çš„å°å·¥å…·ã€‚<br />å¦‚æœå®ƒåˆšå¥½å¸®åˆ°ä½ ä¸€ç‚¹ç‚¹ï¼Œé‚£æˆ‘ä»¬ä¼šå¾ˆå¼€å¿ƒã€‚',
        likeCount: 'å·²æ”¶åˆ° {count} ä¸ªç‚¹èµ',
        likeCountLoaded: 'å·²è·å¾— {count} æ¬¡æ”¯æŒ',
        loading: 'åŠ è½½ä¸­...',
        feedback: 'ğŸ’¬ ç•™ä¸‹ä¸€ç‚¹æƒ³æ³•æˆ–å»ºè®®',
        share: 'ğŸ”— åˆ†äº«ç»™å¯èƒ½ç”¨å¾—ä¸Šçš„æœ‹å‹',
        watchAd: 'ğŸ“º çœ‹ä¸ªå¹¿å‘Šï¼ˆæ•¬è¯·æœŸå¾…...ï¼‰',
        footer: 'æ˜¯å¦æ”¯æŒå®Œå…¨è‡ªæ„¿ Â· å¯¹äº§å“ä½¿ç”¨æ— ä»»ä½•å½±å“å“¦ ğŸ˜º',
        defaultThanks: 'ç‚¹ä¸€ç‚¹ä¸Šé¢çš„ğŸ‘æŒ‰é’®ï¼Œç»™æˆ‘ä»¬ä¸€ç‚¹é¼“åŠ±å§ âœ¨',
        thanksMessages: [
          "æ”¶åˆ°äº†ä¸€ç‚¹ç‚¹æ¸©æš– ğŸŒ¿",
          "è¿™ä¸ªç‚¹èµè¢«æˆ‘ä»¬çè—äº†",
          "ä½ åˆšåˆšè®©è¿™ä¸ªé¡¹ç›®æ›´å¼€å¿ƒäº†ä¸€ç‚¹",
          "è°¢è°¢ä½ ï¼ŒçœŸçš„",
          "æˆ‘ä»¬ä¼šç»§ç»­æŠŠå®ƒç…§é¡¾å¥½çš„",
          "è¿™ä¸€ç§’ï¼Œå¾ˆå€¼å¾—",
          "ä»Šå¤©çš„å¥½å¿ƒæƒ… +1",
          "ä½ çš„è¿™ä»½æ”¯æŒå¾ˆé‡è¦",
          "è¿™ä¸€ä»½å–œæ¬¢ï¼Œæˆ‘ä»¬è®°ä¸‹äº†",
          "åƒé˜³å…‰ç…§è¿›æ¥ä¸€æ · ğŸŒ",
          "è¢«æ¸©æŸ”ä»¥å¾…äº†",
          "è¿™ä¸ªç¬é—´å¾ˆç¾å¥½",
          "è°¢è°¢ä½ çœ‹åˆ°æˆ‘ä»¬",
          "å¿ƒé‡Œå¼€äº†ä¸€æœµå°èŠ± ğŸŒ¸",
          "è¢«å–„æ„åŒ…å›´äº†",
          "è¿™ä»½é¼“åŠ±å¾ˆçè´µ",
          "ä½ çš„æ”¯æŒè®©æˆ‘ä»¬æ›´æœ‰åŠ›é‡äº†",
          "è¿™ä»½æ”¯æŒå¾ˆæš–å¾ˆæš–",
          "æˆ‘ä»¬ä¼šå¸¦ç€è¿™ä»½å–œæ¬¢ç»§ç»­å‰è¡Œ",
          "è¿™ä¸ªç‚¹èµæœ‰æ¸©åº¦",
          "è¢«ç†è§£çš„æ„Ÿè§‰çœŸå¥½",
          "è°¢è°¢ä½ æ„¿æ„åœç•™",
          "è¿™ä»½è®¤å¯å¾ˆæ²‰ç”¸ç”¸",
          "åƒå¤œæ™šçš„ä¸€ç›ç¯ ğŸ’¡",
          "è®©åŠªåŠ›å˜å¾—å€¼å¾—",
          "è¿™ä»½å–„æ„æˆ‘ä»¬æ”¶åˆ°äº†",
          "ä½ è®©ä»Šå¤©å˜å¾—ç‰¹åˆ«",
          "åƒé›¨åçš„ä¸€é“å½©è™¹ ğŸŒˆ",
          "è¿™ä»½å–œæ¬¢æˆ‘ä»¬ä¼šå¥½å¥½ä¿å­˜",
          "è°¢è°¢ä½ ä¸æˆ‘ä»¬åŒåœ¨",
          "è¿™ä»½æ”¯æŒæœ‰é­”æ³• âœ¨",
          "è®©å¿ƒå˜å¾—æŸ”è½¯äº†",
          "è¿™ä»½é¼“åŠ±æˆ‘ä»¬ä¼šä¼ é€’ä¸‹å»",
          "åƒå†¬æ—¥çš„ä¸€æ¯çƒ­èŒ¶ ğŸµ",
          "è¢«çœ‹è§çš„æ„Ÿè§‰çœŸå¥½",
          "è¿™ä»½å–œæ¬¢å¾ˆçº¯ç²¹",
          "è¿™ä»½æ¸©æš–åœ¨æµåŠ¨",
          "æ˜¯ä½ è®©æˆ‘ä»¬åšæŒæœ‰äº†æ„ä¹‰",
          "è¿™ä»½å–„æ„å¾ˆçè´µ",
          "ä½ è®©è¿™ä¸ªä¸–ç•Œæ›´æ¸©æŸ”äº†"
        ],
        shareSuccess: 'âœ… é“¾æ¥å·²å¤åˆ¶åˆ°å‰ªè´´æ¿',
        shareFailed: 'âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶',
        shareRestore: 'ğŸ”— åˆ†äº«ç»™å¯èƒ½ç”¨å¾—ä¸Šçš„æœ‹å‹',
        adLoading: 'ğŸ“º æ­£åœ¨åŠ è½½å¹¿å‘Š...',
        adSuccess: 'âœ… æ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼',
        adFailed: 'âŒ å¹¿å‘ŠåŠ è½½å¤±è´¥',
        adThanks: 'æ‚¨çš„æ”¯æŒè®©æˆ‘ä»¬èƒ½æŒç»­æä¾›å…è´¹æœåŠ¡ ğŸ™',
        cloudLoadFailed: 'åŠ è½½äº‘ç«¯ç‚¹èµæ•°å¤±è´¥ï¼Œä½¿ç”¨æœ¬åœ°æ•°æ®:',
        cloudSyncSuccess: 'äº‘ç«¯åŒæ­¥æˆåŠŸ:',
        cloudSyncFailed: 'äº‘ç«¯åŒæ­¥å¤±è´¥ï¼ŒçŠ¶æ€ç :',
        cloudSyncError: 'äº‘ç«¯åŒæ­¥å¤±è´¥:',
        dailyLimitReached: 'ä»Šæ—¥ç‚¹èµæ¬¡æ•°å·²è¾¾ä¸Šé™ï¼ˆ100æ¬¡ï¼‰ï¼Œæ˜å¤©å†æ¥å§ï¼',
        dailyLimitCount: 'ä»Šæ—¥å·²ç‚¹èµ {count}/100 æ¬¡'
      },
      en: {
        title: 'Support Â· MindWord',
        header: 'ğŸŒ± Support MindWord',
        description: 'MindWord is a completely free little tool.<br />If it helps you even a little bit, we will be very happy.',
        likeCount: 'Received {count} likes',
        likeCountLoaded: 'Received {count} supports',
        loading: 'Loading...',
        feedback: 'ğŸ’¬ Leave some thoughts or suggestions',
        share: 'ğŸ”— Share with friends who might need it',
        watchAd: 'ğŸ“º Watch an ad (coming soon...)',
        footer: 'Support is completely voluntary Â· No impact on product usage ğŸ˜º',
        defaultThanks: 'Click the ğŸ‘ button above to give us some encouragement âœ¨',
        thanksMessages: [
          "Received a little warmth ğŸŒ¿",
          "This like has been treasured by us",
          "You just made this project a little happier",
          "Thank you, really",
          "We will continue to take good care of it",
          "This second is very worthwhile",
          "Today's good mood +1",
          "Your support is very important",
          "This love has been remembered by us",
          "Like sunshine coming in ğŸŒ",
          "Being treated gently",
          "This moment is beautiful",
          "Thank you for seeing us",
          "A small flower bloomed in the heart ğŸŒ¸",
          "Surrounded by kindness",
          "This encouragement is precious",
          "Your support makes us stronger",
          "This support is very warm",
          "We will continue with this love",
          "This like has temperature",
          "The feeling of being understood is great",
          "Thank you for staying",
          "This recognition is heavy",
          "Like a lamp at night ğŸ’¡",
          "Makes effort worthwhile",
          "This kindness has been received by us",
          "You made today special",
          "Like a rainbow after rain ğŸŒˆ",
          "This love will be well preserved by us",
          "Thank you for being with us",
          "This support has magic âœ¨",
          "Makes the heart soft",
          "This encouragement will be passed on",
          "Like a cup of hot tea in winter ğŸµ",
          "The feeling of being seen is great",
          "This love is pure",
          "This warmth is flowing",
          "You give meaning to our persistence",
          "This kindness is precious",
          "You make this world gentler"
        ],
        shareSuccess: 'âœ… Link copied to clipboard',
        shareFailed: 'âŒ Copy failed, please copy manually',
        shareRestore: 'ğŸ”— Share with friends who might need it',
        adLoading: 'ğŸ“º Loading ad...',
        adSuccess: 'âœ… Thank you for your support!',
        adFailed: 'âŒ Ad loading failed',
        adThanks: 'Your support allows us to continue providing free services ğŸ™',
        cloudLoadFailed: 'Failed to load likes from cloud, using local data:',
        cloudSyncSuccess: 'Cloud sync successful:',
        cloudSyncFailed: 'Cloud sync failed, status code:',
        cloudSyncError: 'Cloud sync failed:',
        dailyLimitReached: 'Daily like limit reached (100 times), come back tomorrow!',
        dailyLimitCount: 'Liked {count}/100 times today'
      },
      es: {
        title: 'Apoyar Â· MindWord',
        header: 'ğŸŒ± Apoyar MindWord',
        description: 'MindWord es una herramienta completamente gratuita.<br />Si te ayuda aunque sea un poco, estaremos muy felices.',
        likeCount: 'Recibido {count} me gusta',
        likeCountLoaded: 'Recibido {count} apoyos',
        loading: 'Cargando...',
        feedback: 'ğŸ’¬ Deja algunos pensamientos o sugerencias',
        share: 'ğŸ”— Compartir con amigos que puedan necesitarlo',
        watchAd: 'ğŸ“º Ver un anuncio (prÃ³ximamente...)',
        footer: 'El apoyo es completamente voluntario Â· Sin impacto en el uso del producto ğŸ˜º',
        defaultThanks: 'Haz clic en el botÃ³n ğŸ‘ de arriba para darnos algo de Ã¡nimo âœ¨',
        thanksMessages: [
          "Recibido un poco de calidez ğŸŒ¿",
          "Este me gusta ha sido atesorado por nosotros",
          "Acabas de hacer este proyecto un poco mÃ¡s feliz",
          "Gracias, de verdad",
          "Continuaremos cuidÃ¡ndolo bien",
          "Este segundo vale mucho la pena",
          "El buen humor de hoy +1",
          "Tu apoyo es muy importante",
          "Este amor ha sido recordado por nosotros",
          "Como la luz del sol entrando ğŸŒ",
          "Siendo tratado con gentileza",
          "Este momento es hermoso",
          "Gracias por vernos",
          "Una pequeÃ±a flor floreciÃ³ en el corazÃ³n ğŸŒ¸",
          "Rodeado de bondad",
          "Este estÃ­mulo es precioso",
          "Tu apoyo nos hace mÃ¡s fuertes",
          "Este apoyo es muy cÃ¡lido",
          "Continuaremos con este amor",
          "Este me gusta tiene temperatura",
          "La sensaciÃ³n de ser comprendido es genial",
          "Gracias por quedarte",
          "Este reconocimiento es pesado",
          "Como una lÃ¡mpara en la noche ğŸ’¡",
          "Hace que el esfuerzo valga la pena",
          "Esta bondad ha sido recibida por nosotros",
          "Hiciste que hoy fuera especial",
          "Como un arcoÃ­ris despuÃ©s de la lluvia ğŸŒˆ",
          "Este amor serÃ¡ bien preservado por nosotros",
          "Gracias por estar con nosotros",
          "Este apoyo tiene magia âœ¨",
          "Hace que el corazÃ³n se vuelva suave",
          "Este estÃ­mulo serÃ¡ transmitido",
          "Como una taza de tÃ© caliente en invierno ğŸµ",
          "La sensaciÃ³n de ser visto es genial",
          "Este amor es puro",
          "Esta calidez estÃ¡ fluyendo",
          "TÃº das sentido a nuestra persistencia",
          "Esta bondad es preciosa",
          "Haces que este mundo sea mÃ¡s gentil"
        ],
        shareSuccess: 'âœ… Enlace copiado al portapapeles',
        shareFailed: 'âŒ Copia fallida, por favor copia manualmente',
        shareRestore: 'ğŸ”— Compartir con amigos que puedan necesitarlo',
        adLoading: 'ğŸ“º Cargando anuncio...',
        adSuccess: 'âœ… Â¡Gracias por tu apoyo!',
        adFailed: 'âŒ FallÃ³ la carga del anuncio',
        adThanks: 'Tu apoyo nos permite continuar proporcionando servicios gratuitos ğŸ™',
        cloudLoadFailed: 'Error al cargar me gusta desde la nube, usando datos locales:',
        cloudSyncSuccess: 'SincronizaciÃ³n en la nube exitosa:',
        cloudSyncFailed: 'SincronizaciÃ³n en la nube fallida, cÃ³digo de estado:',
        cloudSyncError: 'SincronizaciÃ³n en la nube fallida:',
        dailyLimitReached: 'Â¡LÃ­mite diario de me gusta alcanzado (100 veces), vuelve maÃ±ana!',
        dailyLimitCount: 'Te gustÃ³ {count}/100 veces hoy'
      }
    };

    // è·å–å½“å‰è¯­è¨€
    function getCurrentLang() {
      return localStorage.getItem('mw_lang') || 'zh';
    }

    // è·å–å½“å‰æ—¥æœŸï¼ˆYYYY-MM-DDæ ¼å¼ï¼‰
    function getCurrentDate() {
      const now = new Date();
      const year = now.getFullYear();
      const month = String(now.getMonth() + 1).padStart(2, '0');
      const day = String(now.getDate()).padStart(2, '0');
      return `${year}-${month}-${day}`;
    }

    // æ£€æŸ¥æ¯æ—¥ç‚¹èµé™åˆ¶
    function checkDailyLikeLimit() {
      const today = getCurrentDate();
      const storedDate = localStorage.getItem('mw_like_date');
      let dailyCount = parseInt(localStorage.getItem('mw_like_daily_count') || '0');

      // å¦‚æœæ˜¯æ–°çš„ä¸€å¤©ï¼Œé‡ç½®è®¡æ•°
      if (storedDate !== today) {
        localStorage.setItem('mw_like_date', today);
        localStorage.setItem('mw_like_daily_count', '0');
        dailyCount = 0;
      }

      return {
        canLike: dailyCount < 100,
        currentCount: dailyCount,
        remaining: 100 - dailyCount
      };
    }

    // å¢åŠ æ¯æ—¥ç‚¹èµè®¡æ•°
    function incrementDailyLikeCount() {
      const today = getCurrentDate();
      const storedDate = localStorage.getItem('mw_like_date');
      let dailyCount = parseInt(localStorage.getItem('mw_like_daily_count') || '0');

      // å¦‚æœæ˜¯æ–°çš„ä¸€å¤©ï¼Œé‡ç½®è®¡æ•°
      if (storedDate !== today) {
        localStorage.setItem('mw_like_date', today);
        localStorage.setItem('mw_like_daily_count', '0');
        dailyCount = 0;
      }

      // å¢åŠ è®¡æ•°
      dailyCount++;
      localStorage.setItem('mw_like_daily_count', dailyCount.toString());

      return dailyCount;
    }

    // è·å–ç¿»è¯‘æ–‡æœ¬
    function t(key, params = {}) {
      const lang = getCurrentLang();
      let text = i18n[lang][key] || i18n.zh[key] || key;

      // æ›¿æ¢å‚æ•°
      Object.keys(params).forEach(key => {
        text = text.replace(new RegExp(`{${key}}`, 'g'), params[key]);
      });

      return text;
    }

    // æ›´æ–°é¡µé¢æ–‡æ¡ˆ
    function updatePageText() {
      document.title = t('title');
      document.querySelector('h1').innerHTML = t('header');
      document.querySelector('.desc').innerHTML = t('description');
      document.querySelector('.footer').textContent = t('footer');
      document.querySelector('a[href="/feedback.html"]').innerHTML = t('feedback');
      document.getElementById('shareBtn').innerHTML = t('share');
      document.getElementById('watchAdBtn').innerHTML = t('watchAd');
    }

    const likeBtn = document.getElementById("likeBtn");
    const likeCountEl = document.getElementById("likeCount");
    const thanksText = document.getElementById("thanksText");

    // åˆå§‹åŒ–æ˜¾ç¤ºä¸ºåŠ è½½ä¸­
    likeCountEl.textContent = t('loading');

    // Cloudflare Worker APIåœ°å€
    const WORKER_URL = 'https://good.mindword.dpdns.org/api/likes';

    // ç®€å•é˜²æŠ–é…ç½®
    let isProcessing = false;
    let lastClickTime = 0;
    const DEBOUNCE_DELAY = 500; // 500msé˜²æŠ–ï¼Œé˜²æ­¢è¿ç‚¹

    // åˆå§‹åŒ–åŠ è½½äº‘ç«¯ç‚¹èµæ•°
    async function loadLikes() {
      try {
        const response = await fetch(WORKER_URL);
        if (!response.ok) throw new Error('Network response was not ok');
        const data = await response.json();

        // æ›´æ–°æœ¬åœ°å­˜å‚¨
        localStorage.setItem("mw_like_count", data.count);
        likeCountEl.textContent = t('likeCountLoaded', { count: data.count });

        return data.count;
      } catch (error) {
        console.log(t('cloudLoadFailed'), error);
        // é™çº§åˆ°æœ¬åœ°å­˜å‚¨
        const localCount = Number(localStorage.getItem("mw_like_count") || 0);
        likeCountEl.textContent = t('likeCountLoaded', { count: localCount });
        return localCount;
      }
    }

    // é¢‘ç‡é™åˆ¶åŠŸèƒ½å·²ç§»é™¤ï¼Œæ–¹ä¾¿æµ‹è¯•

    // åˆå§‹åŒ–
    let count = Number(localStorage.getItem("mw_like_count") || 0);

    // æ›´æ–°é¡µé¢æ–‡æ¡ˆ
    updatePageText();

    // å¼‚æ­¥åŠ è½½äº‘ç«¯æ•°æ®
    loadLikes().then(cloudCount => {
      count = cloudCount;
      localStorage.setItem("mw_like_count", count); // åŒæ­¥åˆ°æœ¬åœ°å­˜å‚¨
    }).catch(error => {
      console.log(t('cloudLoadFailed'), error);
    });

    // è®¾ç½®é»˜è®¤å¼•å¯¼æç¤ºè¯­
    thanksText.textContent = t('defaultThanks');
    thanksText.classList.add("show"); // ç¡®ä¿é»˜è®¤æç¤ºè¯­æ˜¾ç¤ºå‡ºæ¥

    const messages = [
      "æ”¶åˆ°äº†ä¸€ç‚¹ç‚¹æ¸©æš– ğŸŒ¿",
      "è¿™ä¸ªç‚¹èµè¢«æˆ‘ä»¬çè—äº†",
      "ä½ åˆšåˆšè®©è¿™ä¸ªé¡¹ç›®æ›´å¼€å¿ƒäº†ä¸€ç‚¹",
      "è°¢è°¢ä½ ï¼ŒçœŸçš„",
      "æˆ‘ä»¬ä¼šç»§ç»­æŠŠå®ƒç…§é¡¾å¥½çš„",
      "è¿™ä¸€ç§’ï¼Œå¾ˆå€¼å¾—",
      "ä»Šå¤©çš„å¥½å¿ƒæƒ… +1",
      "ä½ çš„è¿™ä»½æ”¯æŒå¾ˆé‡è¦",
      "è¿™ä¸€ä»½å–œæ¬¢ï¼Œæˆ‘ä»¬è®°ä¸‹äº†",
      "åƒé˜³å…‰ç…§è¿›æ¥ä¸€æ · ğŸŒ",
      "è¢«æ¸©æŸ”ä»¥å¾…äº†",
      "è¿™ä¸ªç¬é—´å¾ˆç¾å¥½",
      "è°¢è°¢ä½ çœ‹åˆ°æˆ‘ä»¬",
      "å¿ƒé‡Œå¼€äº†ä¸€æœµå°èŠ± ğŸŒ¸",
      "è¢«å–„æ„åŒ…å›´äº†",
      "è¿™ä»½é¼“åŠ±å¾ˆçè´µ",
      "ä½ çš„æ”¯æŒè®©æˆ‘ä»¬æ›´æœ‰åŠ›é‡äº†",
      "è¿™ä»½æ”¯æŒå¾ˆæš–å¾ˆæš–",
      "æˆ‘ä»¬ä¼šå¸¦ç€è¿™ä»½å–œæ¬¢ç»§ç»­å‰è¡Œ",
      "è¿™ä¸ªç‚¹èµæœ‰æ¸©åº¦",
      "è¢«ç†è§£çš„æ„Ÿè§‰çœŸå¥½",
      "è°¢è°¢ä½ æ„¿æ„åœç•™",
      "è¿™ä»½è®¤å¯å¾ˆæ²‰ç”¸ç”¸",
      "åƒå¤œæ™šçš„ä¸€ç›ç¯ ğŸ’¡",
      "è®©åŠªåŠ›å˜å¾—å€¼å¾—",
      "è¿™ä»½å–„æ„æˆ‘ä»¬æ”¶åˆ°äº†",
      "ä½ è®©ä»Šå¤©å˜å¾—ç‰¹åˆ«",
      "åƒé›¨åçš„ä¸€é“å½©è™¹ ğŸŒˆ",
      "è¿™ä»½å–œæ¬¢æˆ‘ä»¬ä¼šå¥½å¥½ä¿å­˜",
      "è°¢è°¢ä½ ä¸æˆ‘ä»¬åŒåœ¨",
      "è¿™ä»½æ”¯æŒæœ‰é­”æ³• âœ¨",
      "è®©å¿ƒå˜å¾—æŸ”è½¯äº†",
      "è¿™ä»½é¼“åŠ±æˆ‘ä»¬ä¼šä¼ é€’ä¸‹å»",
      "åƒå†¬æ—¥çš„ä¸€æ¯çƒ­èŒ¶ ğŸµ",
      "è¢«çœ‹è§çš„æ„Ÿè§‰çœŸå¥½",
      "è¿™ä»½å–œæ¬¢å¾ˆçº¯ç²¹",
      "è¿™ä»½æ¸©æš–åœ¨æµåŠ¨",
      "æ˜¯ä½ è®©æˆ‘ä»¬åšæŒæœ‰äº†æ„ä¹‰",
      "è¿™ä»½å–„æ„å¾ˆçè´µ",
      "ä½ è®©è¿™ä¸ªä¸–ç•Œæ›´æ¸©æŸ”äº†"
    ];

    likeBtn.addEventListener("click", async (e) => {
      // æ£€æŸ¥æ¯æ—¥ç‚¹èµé™åˆ¶
      const limitInfo = checkDailyLikeLimit();

      if (!limitInfo.canLike) {
        // è¾¾åˆ°æ¯æ—¥é™åˆ¶ï¼Œæ˜¾ç¤ºæç¤ºï¼Œä½†ä¿ç•™äº¤äº’æ•ˆæœ
        thanksText.textContent = t('dailyLimitReached');
        thanksText.classList.remove("show");
        void thanksText.offsetWidth;
        thanksText.classList.add("show");

        // ä»ç„¶ä¿ç•™è§†è§‰åé¦ˆæ•ˆæœ
        likeCountEl.style.transform = 'scale(1.1)';
        setTimeout(() => {
          likeCountEl.style.transform = 'scale(1)';
        }, 150);

        // âœ¨ ç²’å­åŠ¨ç”»ï¼ˆåŒæ­¥è¿›è¡Œï¼Œä¸é˜»å¡ï¼‰
        const x = e.clientX;
        const y = e.clientY;
        const bubble = document.createElement("span");
        bubble.className = "bubble";
        bubble.textContent = ['ğŸ’™', 'ğŸŒ±', 'âœ¨', 'ğŸ«§'][Math.floor(Math.random() * 4)];
        bubble.style.left = x + "px";
        bubble.style.top = y + "px";
        document.body.appendChild(bubble);
        setTimeout(() => bubble.remove(), 1200);

        return; // ä¸æ‰§è¡Œåç»­ç‚¹èµé€»è¾‘å’ŒAPIè°ƒç”¨
      }

      // ğŸ¯ ç«‹å³æ›´æ–°æœ¬åœ°çŠ¶æ€å’Œæ˜¾ç¤ºï¼ˆè®©ç”¨æˆ·æ„Ÿè§‰è¶…å¿«ï¼‰
      count++;
      // å¢åŠ æ¯æ—¥è®¡æ•°
      incrementDailyLikeCount();
      localStorage.setItem("mw_like_count", count);
      likeCountEl.textContent = t('likeCountLoaded', { count: count });

      likeCountEl.style.transform = 'scale(1.1)'; // è½»å¾®æ”¾å¤§æ•ˆæœ
      setTimeout(() => {
        likeCountEl.style.transform = 'scale(1)';
      }, 150);

      // âœ¨ ç²’å­åŠ¨ç”»ï¼ˆåŒæ­¥è¿›è¡Œï¼Œä¸é˜»å¡ï¼‰
      const x = e.clientX;
      const y = e.clientY;
      const bubble = document.createElement("span");
      bubble.className = "bubble";
      bubble.textContent = ['ğŸ’™', 'ğŸŒ±', 'âœ¨', 'ğŸ«§'][Math.floor(Math.random() * 4)];
      bubble.style.left = x + "px";
      bubble.style.top = y + "px";
      document.body.appendChild(bubble);
      setTimeout(() => bubble.remove(), 1200);

      // ğŸ’¬ æ„Ÿè°¢è¯­ï¼ˆä¹Ÿç«‹å³æ˜¾ç¤ºï¼‰
      const msg = t('thanksMessages')[Math.floor(Math.random() * t('thanksMessages').length)];
      thanksText.textContent = msg;
      thanksText.classList.remove("show");
      void thanksText.offsetWidth;
      thanksText.classList.add("show");

      // ğŸš€ åå°å¼‚æ­¥åŒæ­¥åˆ°äº‘ç«¯ï¼ˆä¸é˜»å¡ç”¨æˆ·ä½“éªŒï¼‰
      setTimeout(async () => {
        try {
          const response = await fetch(WORKER_URL, {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json',
            }
          });

          if (response.ok) {
            const data = await response.json();
            // å¦‚æœäº‘ç«¯æ•°æ®ä¸æœ¬åœ°ä¸ä¸€è‡´ï¼Œå¯ä»¥é€‰æ‹©æ˜¯å¦æ›´æ–°æ˜¾ç¤º
            // è¿™é‡Œé€‰æ‹©ä¸æ›´æ–°ï¼Œä¿æŒç”¨æˆ·çš„å³æ—¶åé¦ˆ
            console.log(t('cloudSyncSuccess'), data.count);
          } else {
            console.log(t('cloudSyncFailed'), response.status);
          }
        } catch (error) {
          console.log(t('cloudSyncError'), error);
          // ç½‘ç»œå¤±è´¥ä¹Ÿæ²¡å…³ç³»ï¼Œæœ¬åœ°æ•°æ®å·²ç»æ›´æ–°äº†
        }
      }, 0); // ç«‹å³åœ¨åå°æ‰§è¡Œ

      isProcessing = false;
    });

    // åˆ†äº«æŒ‰é’®åŠŸèƒ½
    const shareBtn = document.getElementById('shareBtn');
    shareBtn.addEventListener('click', (e) => {
      e.preventDefault();

      // å¤åˆ¶é“¾æ¥åˆ°å‰ªè´´æ¿
      const shareUrl = 'https://mindword.dpdns.org';

      if (navigator.clipboard && navigator.clipboard.writeText) {
        navigator.clipboard.writeText(shareUrl).then(() => {
          // æ˜¾ç¤ºå¤åˆ¶æˆåŠŸåé¦ˆ
          const originalText = shareBtn.innerHTML;
          shareBtn.innerHTML = t('shareSuccess');
          shareBtn.style.background = '#e8f5e8';
          shareBtn.style.color = '#2d7d32';

          setTimeout(() => {
            shareBtn.innerHTML = originalText;
            shareBtn.style.background = '';
            shareBtn.style.color = '';
          }, 2000);
        }).catch(() => {
          // é™çº§æ–¹æ¡ˆ
          fallbackCopyText(shareUrl);
        });
      } else {
        // é™çº§æ–¹æ¡ˆ
        fallbackCopyText(shareUrl);
      }
    });

    // é™çº§å¤åˆ¶æ–¹æ¡ˆ
    function fallbackCopyText(text) {
      const textArea = document.createElement('textarea');
      textArea.value = text;
      textArea.style.position = 'fixed';
      textArea.style.left = '-999999px';
      textArea.style.top = '-999999px';
      document.body.appendChild(textArea);
      textArea.focus();
      textArea.select();

      try {
        document.execCommand('copy');
        const originalText = shareBtn.innerHTML;
        shareBtn.innerHTML = t('shareSuccess');
        shareBtn.style.background = '#e8f5e8';
        shareBtn.style.color = '#2d7d32';

        setTimeout(() => {
          shareBtn.innerHTML = originalText;
          shareBtn.style.background = '';
          shareBtn.style.color = '';
        }, 2000);
      } catch (err) {
        shareBtn.innerHTML = t('shareFailed');
        setTimeout(() => {
          shareBtn.innerHTML = t('shareRestore');
        }, 2000);
      }

      document.body.removeChild(textArea);
    }

    // çœ‹å¹¿å‘Šæ”¯æŒåŠŸèƒ½
    const watchAdBtn = document.getElementById('watchAdBtn');
    watchAdBtn.addEventListener('click', (e) => {
      e.preventDefault();

      // æ˜¾ç¤ºå¹¿å‘ŠåŠ è½½çŠ¶æ€
      const originalText = watchAdBtn.innerHTML;
      watchAdBtn.innerHTML = t('adLoading');
      watchAdBtn.style.background = '#fff3cd';
      watchAdBtn.style.color = '#856404';

      // æ¨¡æ‹Ÿå¹¿å‘ŠåŠ è½½å’Œè§‚çœ‹è¿‡ç¨‹
      setTimeout(() => {
        // è¿™é‡Œå¯ä»¥é›†æˆçœŸå®çš„å¹¿å‘ŠSDKï¼Œæ¯”å¦‚Google AdSenseã€è…¾è®¯å¹¿å‘Šç­‰
        // ç°åœ¨ç”¨æ¨¡æ‹Ÿçš„æ–¹å¼å±•ç¤º

        const adCompleted = Math.random() > 0.2; // 80%æˆåŠŸç‡æ¨¡æ‹Ÿ

        if (adCompleted) {
          // å¹¿å‘Šè§‚çœ‹å®Œæˆ
          watchAdBtn.innerHTML = t('adSuccess');
          watchAdBtn.style.background = '#d4edda';
          watchAdBtn.style.color = '#155724';

          // å¯ä»¥é€‰æ‹©ç»™ä¸€äº›æ­£å‘åé¦ˆ
          thanksText.textContent = t('adThanks');
          thanksText.classList.add("show");

          // 3ç§’åæ¢å¤åŸçŠ¶
          setTimeout(() => {
            watchAdBtn.innerHTML = originalText;
            watchAdBtn.style.background = '';
            watchAdBtn.style.color = '';
          }, 3000);
        } else {
          // å¹¿å‘ŠåŠ è½½å¤±è´¥
          watchAdBtn.innerHTML = t('adFailed');
          watchAdBtn.style.background = '#f8d7da';
          watchAdBtn.style.color = '#721c24';

          setTimeout(() => {
            watchAdBtn.innerHTML = originalText;
            watchAdBtn.style.background = '';
            watchAdBtn.style.color = '';
          }, 2000);
        }
      }, 1500); // æ¨¡æ‹Ÿ1.5ç§’åŠ è½½æ—¶é—´
    });
  </script>
</body>

</html>